<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tennis Game</title>
    <style>
        #container {
            display: flex;
            width: 600px;
            margin: 20px auto;
            align-items: center;
            justify-content: space-between;
        }

        #field {
            width: 600px;
            height: 400px;
            position: relative;
            border: 2px solid black;
            background-color: rgb(248, 248, 153);
            margin: 20px auto;
        }

        #ball {
            width: 40px;
            height: 40px;
            background-color: red;
            border-radius: 50%;
            position: absolute;
            left: 280px;
            top: 180px;
        }

        #leftPaddle, #rightPaddle {
            width: 10px;
            height: 80px;
            position: absolute;
        }

        #leftPaddle {
            left: 0;
            background-color: green;
        }

        #rightPaddle {
            right: 0;
            background-color: blue;
        }


        #score {
            font-size: 32px;
            flex: 1;
            text-align: center;
            /*margin-left: -52px;*/
        }

    </style>
</head>
<body>
<div id="container">
    <button id="startButton">Старт!</button>
    <div id="score">0:0</div>
</div>
<div id="field">
    <div id="ball"></div>
    <div id="leftPaddle"></div>
    <div id="rightPaddle"></div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const field = document.getElementById("field");
        const ball = document.getElementById("ball");
        const leftPaddle = document.getElementById("leftPaddle");
        const rightPaddle = document.getElementById("rightPaddle");
        const startButton = document.getElementById("startButton");
        const scoreElement = document.getElementById("score");

        const fieldWidth = field.offsetWidth;
        const fieldHeight = field.offsetHeight;
        const ballSize = ball.offsetWidth;
        const paddleHeight = leftPaddle.offsetHeight;
        const paddleSpeed = 5;

        let ballX = fieldWidth / 2 - ballSize / 2;
        let ballY = fieldHeight / 2 - ballSize / 2;
        let ballSpeedX = 0;
        let ballSpeedY = 0;
        let leftPaddleY = fieldHeight / 2 - paddleHeight / 2;
        let rightPaddleY = fieldHeight / 2 - paddleHeight / 2;
        let scoreLeft = 0;
        let scoreRight = 0;
        let gameInterval;
        let leftPaddleSpeedY = 0;
        let rightPaddleSpeedY = 0;
        let isGameStarted = false;

        function update() {

            ballX += ballSpeedX;
            ballY += ballSpeedY;

            if (ballY < 0 || ballY > fieldHeight - ballSize) {
                ballSpeedY = -ballSpeedY;
            }

            if (
                ballX <= 10 &&
                ballY + ballSize >= leftPaddleY &&
                ballY <= leftPaddleY + paddleHeight &&
                ballX >= 0
            ) {
                ballSpeedX = Math.abs(ballSpeedX);
                ballX = 10;
            }

            if (
                ballX + ballSize >= fieldWidth - 10 &&
                ballY + ballSize >= rightPaddleY &&
                ballY <= rightPaddleY + paddleHeight &&
                ballX + ballSize <= fieldWidth
            ) {
                ballSpeedX = -Math.abs(ballSpeedX);
                ballX = fieldWidth - 10 - ballSize;
            }

            if (ballX < 0 || ballX > fieldWidth - ballSize) {
                if (ballX < 0) {
                    scoreRight++;
                    ballX = 0;
                } else {
                    scoreLeft++;
                    ballX = fieldWidth - ballSize;
                }
                ballSpeedX = 0; 
                ballSpeedY = 0; 
                clearInterval(gameInterval);
                startButton.disabled = false;
                ballY = fieldHeight / 2 - ballSize / 2;
                ball.style.left = `${ballX}px`;
                ball.style.top = `${ballY}px`;
                updateScore();
                return;
            }

            ball.style.left = `${ballX}px`;
            ball.style.top = `${ballY}px`;
        }

        function updateScore() {
            scoreElement.textContent = `${scoreLeft}:${scoreRight}`;
        }

        function startGame() {
    if (!isGameStarted || ballSpeedX === 0 && ballSpeedY === 0) {
        isGameStarted = true;
        startButton.disabled = true;
        if (ballSpeedX === 0 && ballSpeedY === 0) {
            ballSpeedX = Math.random() < 0.5 ? -1 : 1;
            ballSpeedY = Math.random() < 0.5 ? -1 : 1;
        }
        ballX = fieldWidth / 2 - ballSize / 2;
        ballY = fieldHeight / 2 - ballSize / 2;
        gameInterval = setInterval(update, 20);
    }
}

        function movePaddle(e) {
            const keyCode = e.keyCode;
            if (keyCode === 16) {
                leftPaddleSpeedY = -paddleSpeed;
            } else if (keyCode === 17) {
                leftPaddleSpeedY = paddleSpeed;
            } else if (keyCode === 38) {
                rightPaddleSpeedY = -paddleSpeed;
            } else if (keyCode === 40) {
                rightPaddleSpeedY = paddleSpeed;
            }
        }

        function stopPaddle(e) {
            const keyCode = e.keyCode;
            if (keyCode === 16 || keyCode === 17) {
                leftPaddleSpeedY = 0;
            } else if (keyCode === 38 || keyCode === 40) {
                rightPaddleSpeedY = 0;
            }
        }

        function updatePaddles() {
            leftPaddleY += leftPaddleSpeedY;
            leftPaddleY = Math.min(Math.max(leftPaddleY, 0), fieldHeight - paddleHeight);
            leftPaddle.style.top = `${leftPaddleY}px`;

            rightPaddleY += rightPaddleSpeedY;
            rightPaddleY = Math.min(Math.max(rightPaddleY, 0), fieldHeight - paddleHeight);
            rightPaddle.style.top = `${rightPaddleY}px`;
        }

        setInterval(updatePaddles, 20);

        document.addEventListener("keydown", movePaddle);
        document.addEventListener("keyup", stopPaddle);
        startButton.addEventListener("click", startGame);
    })
</script>
</body>
</html>
