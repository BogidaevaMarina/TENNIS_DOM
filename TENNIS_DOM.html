<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tennis Game</title>
  <style>
    #field {
      width: 600px;
      height: 400px;
      position: relative;
      border: 2px solid black; /* Черная рамка поля */
      background-color: rgb(248, 248, 153); /* Желтое поле */
      margin: 20px auto;
    }

    #ball {
      width: 40px; /* Увеличили ширину мяча до 40px */
      height: 40px; /* Увеличили высоту мяча до 40px */
      background-color: red;
      border-radius: 50%;
      position: absolute;
      left: 280px; /* Посередине поля (600 - 40) / 2 = 280 */
      top: 180px; /* Посередине поля (400 - 40) / 2 = 180 */
    }

    #leftPaddle, #rightPaddle {
      width: 10px;
      height: 80px;
      position: absolute;
    }

    #leftPaddle {
      left: 0;
      background-color: green; /* Зеленая левая ракетка */
    }

    #rightPaddle {
      right: 0;
      background-color: blue; /* Синяя правая ракетка */
    }

    button {
      display: block;
      margin: 20px auto;
    }

    #score {
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="field">
    <div id="ball"></div>
    <div id="leftPaddle"></div>
    <div id="rightPaddle"></div>
  </div>
  <button id="startButton">Старт!</button>
  <div id="score">0 : 0</div>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const field = document.getElementById("field");
      const ball = document.getElementById("ball");
      const leftPaddle = document.getElementById("leftPaddle");
      const rightPaddle = document.getElementById("rightPaddle");
      const startButton = document.getElementById("startButton");
      const scoreElement = document.getElementById("score");

      const fieldWidth = field.offsetWidth;
      const fieldHeight = field.offsetHeight;
      const ballSize = ball.offsetWidth;
      const paddleHeight = leftPaddle.offsetHeight;
      const paddleSpeed = 5;

      let ballX = fieldWidth / 2 - ballSize / 2;
      let ballY = fieldHeight / 2 - ballSize / 2;
      let ballSpeedX = 1;
      let ballSpeedY = 1;
      let leftPaddleY = fieldHeight / 2 - paddleHeight / 2;
      let rightPaddleY = fieldHeight / 2 - paddleHeight / 2;
      let scoreLeft = 0;
      let scoreRight = 0;
      let gameInterval;

      function update() {
        // Update ball position
        ballX += ballSpeedX;
        ballY += ballSpeedY;

        // Ball collision with top and bottom walls
        if (ballY < 0 || ballY > fieldHeight - ballSize) {
          ballSpeedY = -ballSpeedY;
        }

        // Ball collision with left paddle
        if (
          ballX <= paddleSpeed &&
          ballY + ballSize >= leftPaddleY &&
          ballY <= leftPaddleY + paddleHeight &&
          ballX >= 0
        ) {
          ballSpeedX = Math.abs(ballSpeedX); // Положительная скорость по оси X
          ballX = paddleSpeed; // Перемещаем мяч к границе ракетки
        }

        // Ball collision with right paddle
        if (
          ballX + ballSize >= fieldWidth - paddleSpeed &&
          ballY + ballSize >= rightPaddleY &&
          ballY <= rightPaddleY + paddleHeight &&
          ballX + ballSize <= fieldWidth
        ) {
          ballSpeedX = -Math.abs(ballSpeedX); // Отрицательная скорость по оси X
          ballX = fieldWidth - paddleSpeed - ballSize; // Перемещаем мяч к границе ракетки
        }

        // Ball out of bounds - reset position and update scores
        if (ballX < 0 || ballX > fieldWidth - ballSize) {
          if (ballX < 0) {
            scoreRight++;
            ballX = 0; // Перемещаем мяч к левой стенке
          } else {
            scoreLeft++;
            ballX = fieldWidth - ballSize; // Перемещаем мяч к правой стенке
          }
          clearInterval(gameInterval);
          startButton.disabled = false;
          ballY = fieldHeight / 2 - ballSize / 2;
          ball.style.left = `${ballX}px`;
          ball.style.top = `${ballY}px`;
          updateScore();
          return;
        }

        ball.style.left = `${ballX}px`;
        ball.style.top = `${ballY}px`;
      }

      function updateScore() {
        scoreElement.textContent = `${scoreLeft} : ${scoreRight}`;
      }

      function startGame() {
        startButton.disabled = true;
        ballX = fieldWidth / 2 - ballSize / 2;
        ballY = fieldHeight / 2 - ballSize / 2;
        ball.style.left = `${ballX}px`;
        ball.style.top = `${ballY}px`;
        ballSpeedX = Math.random() < 0.5 ? -1 : 1; // Случайное направление мяча по оси X
        gameInterval = setInterval(update, 20);
      }

      function movePaddle(e) {
        const keyCode = e.keyCode;
        if (keyCode === 16) { // Shift key
          if (e.type === "keydown") {
            if (leftPaddleY > 0) {
              leftPaddleY -= paddleSpeed;
            }
          }
        } else if (keyCode === 17) { // Ctrl key
          if (e.type === "keydown") {
            if (leftPaddleY < fieldHeight - paddleHeight) {
              leftPaddleY += paddleSpeed;
            }
          }
        } else if (keyCode === 38) { // Up arrow key
          if (e.type === "keydown") {
            if (rightPaddleY > 0) {
              rightPaddleY -= paddleSpeed;
            }
          }
        } else if (keyCode === 40) { // Down arrow key
          if (e.type === "keydown") {
            if (rightPaddleY < fieldHeight - paddleHeight) {
              rightPaddleY += paddleSpeed;
            }
          }
        }

        leftPaddle.style.top = `${leftPaddleY}px`;
        rightPaddle.style.top = `${rightPaddleY}px`;
      }

      document.addEventListener("keydown", movePaddle);
      document.addEventListener("keyup", movePaddle);
      startButton.addEventListener("click", startGame);
    });
  </script>
</body>
</html>
